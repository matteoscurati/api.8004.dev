[Unit]
Description=API 8004.dev - ERC-8004 Event Indexer
After=network.target postgresql.service
Wants=postgresql.service

[Service]
Type=simple
User=indexer
Group=indexer
WorkingDirectory=/opt/api.8004.dev
Environment="RUST_LOG=info"
EnvironmentFile=/opt/api.8004.dev/.env
ExecStart=/opt/api.8004.dev/api_8004_dev
Restart=on-failure
RestartSec=10s

# Security hardening
NoNewPrivileges=true
PrivateTmp=true
ProtectSystem=strict
ProtectHome=true
ReadWritePaths=/opt/api.8004.dev

# Logging
StandardOutput=journal
StandardError=journal
SyslogIdentifier=api-8004-dev

[Install]
WantedBy=multi-user.target
